<p align="center">
  <img src="https://user-images.githubusercontent.com/24764210/95851941-f06a9a00-0d8d-11eb-94c8-24a102e0b1d5.JPG">
</p>

[SQL 자격검정 실전문제](https://product.kyobobook.co.kr/detail/S000001399867)

# 목차

- [데이터 모델링의 이해](#데이터-모델링의-이해)
  - [데이터 모델링의 이해](#데이터-모델링의-이해-1)
    - [모델링](#모델링)
    - [엔터티](#엔터티)
    - [속성](#속성)
    - [관계](#관계)
    - [식별자](#식별자)
  - [데이터 모델과 성능](#데이터-모델과-성능)
    - [성능 데이터 모델링](#성능-데이터-모델링)
    - [정규화와 성능](#정규화와-성능)
    - [반정규화와 성능](#반정규화와-성능)
    - [대량 데이터에 따른 성능](#대량-데이터에-따른-성능)
    - [데이터베이스 구조와 성능](#데이터베이스-구조와-성능)
    - [분산 데이터베이스와 성능](#분산-데이터베이스와-성능)
- [SQL 기본 및 활용](#sql-기본-및-활용)
  - [SQL 기본](#sql-기본)
    - [관계형 데이터베이스](#관계형-데이터베이스)
    - [DDL](#ddl)
      - [CREATE](#create)
      - [ALTER](#alter)
    - [DML](#dml)
      - [INSERT](#insert)
      - [UPDATE](#update)
      - [DELETE](#delete)
      - [SELECT](#select)
    - [TCL](#tcl)
    - [WHERE](#where)
    - [FUNCTION](#function)
    - [GROUP BY, HAVING](#group-by-having)
    - [ORDER BY](#order-by)
    - [JOIN](#join)
  - [SQL 활용](#sql-활용)
    - [표준 JOIN](#표준-join)
    - [집합 연산자](#집합-연산자)
    - [계층형 질의와 셀프 조인](#계층형-질의와-셀프-조인)
    - [서브 쿼리](#서브-쿼리)
    - [그룹 함수](#그룹-함수)
    - [윈도우 함수](#윈도우-함수)
    - [DCL](#dcl)
    - [절차형 SQL](#절차형-sql)
  - [SQL 최적화 기본 원리](#sql-최적화-기본-원리)
    - [옵티마이저와 실행계획](#옵티마이저와-실행계획)
    - [인덱스 기본](#인덱스-기본)
    - [JOIN 수행 원리](#join-수행-원리)

# 데이터 모델링의 이해
__TBU__

## 데이터 모델링의 이해
__TBU__

### 모델링
__TBU__

### 엔터티
__TBU__

### 속성
__TBU__

### 관계
__TBU__

### 식별자
__TBU__

## 데이터 모델과 성능
__TBU__

### 성능 데이터 모델링
__TBU__

### 정규화와 성능
__TBU__

### 반정규화와 성능
__TBU__

### 대량 데이터에 따른 성능
__TBU__

### 데이터베이스 구조와 성능
__TBU__

### 분산 데이터베이스와 성능
__TBU__

<!-- -->

# SQL 기본 및 활용

## SQL 기본
**DB (DataBase)**

특정 기업이나 조직 또는 개인이 필요에 의해 데이터를 일정한 형태로 저장해 놓은 것

**DBMS (DataBase Management System)**

효율적인 데이터 관리와 (예기치 못한 사건으로 인한) 데이터 손상을 피하고, 필요 시 데이터를 복구하기 위한 강력한 기능의 SW

|년도|DB의 발전|
|------|---|
|1960|플로우차트 중심의 개발, 파일구조 사용|
|1970|DB 관리기법이 처음 태동, 계층-망형 DB 등장|
|1980|관계형 DB 상용화, Oracle, Sybase 등장|
1990|객체 관계형 DB로 발전|

### 관계형 데이터베이스
**SQL (Structured Query Language)**

관계형 DB에서 데이터 정의, 조작, 제어를 위해 사용하는 언어

|분류|용도|명령어|
|------|:---:|---|
|Data Definition Language|데이터 정의|CREATE, ALTER, DROP, RENAME|
|Data Manipulation Language|데이터 조작|SELECT, INSERT, UPDATE, DELETE|
|Data Control Language|데이터 제어|GRANT, REVOKE|
|Transaction Control Language|트랜잭션 제어|COMMIT, ROLLBACK|

**테이블**

데이터를 저장하는 객체, Row 와 Column 으로 구성

**정규화**

데이터의 정합성 확보와 데이터 입력/수정/삭제시 발생할 수 있는 이상현상을 방지하기 위함

### DDL
|데이터 유형|설명|
|------|---|
|CHAR(s)|고정 길이 문자열 정보|
|VARCHAR(s)|가변 길이 문자열 정보|
|NUMERIC|정수, 실수 등 숫자 정보|
|DATE|날짜와 시각 정보|

#### CREATE
**CREATE TABLE**
```sql
CREATE TABLE 테이블명(
  칼럼명1 DATATYPE [DEFAULT식],
  칼럼명2 DATATYPE [DEFAULT식],
  칼럼명3 DATATYPE [DEFAULT식],
  ...
);
```

* 테이블명 간 중복 불가
* 테이블 내 칼럼명 간 중복 불가
* 테이블명과 칼럼명은 반드시 문자로 시작 (A-Z,a-z,0-9,_,$,#만 사용 가능)
* 각 칼럼은 ,로 구분되고 ;로 끝난다
* 칼럼 뒤 데이터 유형의 지정 필수
* DATETIME 과 NUMBER 데이터 유형에는 크기 지정 필수x

**제약조건 (CONSTRAINT)**

데이터의 무결성 보장 목적

|CONSTRAINT|기능|
|------|---|
|NOT NULL|NULL값 입력금지|
|CHECK|입력 값 범위 제한|
|PRIMARY KEY(기본키)|기본키 정의|
|UNIQUE KEY(고유키)|고유키 정의|
|FOREIGN KEY(외래키)|외래키 정의|

```sql
CREATE TABLE 테이블명 (
  칼럼명1 DATATYPE [DEFAULT식] [CONSTRAINT 제약조건명] PRIMARY KEY,
  칼럼명2 DATATYPE [DEFAULT식] [CONSTRAINT 제약조건명] NOT NULL UNIQUE,
  칼럼명3 DATATYPE [DEFAULT식] [CONSTRAINT 제약조건명] CHECK(CHECK 조건),
  킬람명4 DATATYPE [DEFAULT식] [CONSTRAINT 제약조건명] REFERENCES 참조 테이블명[(참조 칼럼명)]
  ...
);
```

**테이블 구조 확인**
```sql
DESC 테이블명; -- Oracle
exec sp_help 'dbo.테이블명' -- SQL Server
```

#### ALTER
테이블 구조 변경(칼럼 추가/수정/삭제 등)

**ALTER TABLE**

ALTER TABLE 테이블명 변경할 내용;

**ADD**
```sql
ADD 칼럼명 DATATYPE [DEFAULT식] [제약조건];

ADD 제약조건(기존 칼럼명);
* NOT NULL : MODIFY 기존 칼럼명 NOT NULL|NULL
```

**MODIFY**
```sql
MODIFY 칼럼명 뉴자료형;
MODIFY 칼럼명 DEFAULT식;
* NOT NULL 제외 제약조건 MODIFY 불가능
** SQL Server : MODIFY → ALTER
```

**RENAME**
```sql
RENAME COLUMN 기존 칼럼명 TO 뉴칼럼명; -- Oracle
EXEC sp_rename 'dbo.테이블명.기존칼럼명', '뉴칼럼명', ‘COLUMN’; -- SQL Server

RENAME [기존테이블명] TO 뉴테이블명; -- Oracle
EXEC sp_rename ‘기존테이블명’,‘뉴테이블명’; -- SQL Server

RENAME CONSTRAINT 제약조건명 TO 뉴제약조건명;
```

**DROP**
```sql
DROP TABLE 테이블명;
DROP COLUMN 칼럼명;
DROP SONSTRAIONT 제약조건명;
```

**TRUNCATE TABLE**

해당 테이블의 모든 행을 삭제하며 AUTO CUMMIT

```sql
TRUNCATE TABLE 테이블명;
```

### DML

|분류|Oracle|SQL Server|
|-|-|-|
|DDL|AUTO COMMIT|AUTO COMMIT|
|DML|SELF COMMIT|AUTO COMMIT|

#### INSERT
테이블에 새로운 행을 추가하는 구문

```sql
INSERT
  INTO 테이블명
       (
         컬럼명1
       , 컬럼명2
       , 컬럼명3
       , ...
       )
VALUES
       (
         VALUE1
       , VALUE2
       , VALUE3
       , ...
       );
```

#### UPDATE
테이블에 기록되어 있는 기존 데이터를 수정하는 구문

```sql
UPDATE 테이블명
   SET 칼럼명 = 변경값,
       칼럼명 = 변경값,
       ...
[WHERE 절];
```

#### DELETE
테이블에 기록된 데이터를 삭제하는 구문

```sql
DELETE FROM 테이블명
[WHERE 절];
```

#### SELECT
테이블에 기록된 데이터를 조회하는 구문

```sql
SELECT
       [DISTINCT] 컬럼명||'합성' AS "ALIAS" -- Oracle
     , [DISTINCT] 컬럼명 +'합성' "ALIAS" -- SQL Server
     , ...
  FROM 테이블명;
```
\* DISTINCT 는 SELECT 절에 1번만 기술 가능

**와일드카드**

\* : 모든

% : 0개 이상

_ : 1개

### TCL
DB의 논리적 연산단위로, 밀접히 관련되어 분리될 수 없는 1개 이상의 DB 조작

|분류|기능|
|-|-|
|COMMIT|올바르게 반영된 데이터를 DB에 반영|
|ROLLBACK|트랜잭션 시작 이전의 상태로 회귀|
|SAVEPOINT|저장 지점|

```sql
-- Oracle
SAVEPOINT SP;
ROLLBACK TO SP;

-- SQL Server
SAVE TRAN ST;
ROLLBACK TRAN ST;

COMMIT;
```

**트랜잭션의 특성**
* 원자성 : 트랜잭션에서 정의된 연산들은 모두 성공적으로 실행되거나 전혀 실행되지 않아야 함
* 일관성 : 트랜잭션 실행 전 DB 내용이 잘못되지 않으면 실행 후도 잘못되지 않아야 함
* 고립성 : 트랜잭션 실행 도중 다른 트랜잭션의 영향을 받아 잘못된 결과를 만들어서는 안 됨
* 지속성 : 트랜잭션이 성공적으로 수행되면 DB의 내용은 영구적으로 저장

### WHERE
```sql
SELECT
       [DISTINCT/ALL] 칼럼명 [ALIAS]
  FROM 테이블명
 WHERE 조건식;
```

**연산자의 종류**
|연산 우선순위|설명|
|-|-|
|0|()|
|1|산술 연산자|
|2|연결 연산자|
|3|비교 연산자|
|4|IS NULL / LIKE / IN 등 SQL 비교 연산자|
|5|BETWEEN A AND B|
|6|논리 연산자(NOT)|
|7|논리 연산자(**AND**)|
|8|논리 연산자(**OR**)|

* NULL 값과의 수치연산 → NULL 값 리턴
* NULL 값과의 비교연산 → 거짓(FALSE) 리턴

**ROWNUM, TOP**
```sql
WHERE ROWNUM = 1; -- Oracle
SELECT TOP(1) 칼럼명 FROM 테이블명; -- SQL Server
```

### FUNCTION
**TBU**

### GROUP BY, HAVING
**TBU**

### ORDER BY
**TBU**

### JOIN
**TBU**

## SQL 활용
**TBU**

### 표준 JOIN
**TBU**

### 집합 연산자
**TBU**

### 계층형 질의와 셀프 조인
**TBU**

### 서브 쿼리
**TBU**

### 그룹 함수
**TBU**

### 윈도우 함수
**TBU**

### DCL
**TBU**

### 절차형 SQL
**TBU**

## SQL 최적화 기본 원리
**TBU**

### 옵티마이저와 실행계획
**TBU**

### 인덱스 기본
**TBU**

### JOIN 수행 원리
**TBU**
